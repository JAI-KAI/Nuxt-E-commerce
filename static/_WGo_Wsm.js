import{u as s,a as l}from"./iv6QuJzc.js";const g=()=>{const{addMessage:u}=l(),a=s("currentUserEmail"),e=s("currentUserCart",()=>({}));{const t=localStorage.getItem("currentUserCart");t&&(e.value=JSON.parse(t))}return{addToCart:t=>{e.value[a.value]||(e.value[a.value]=[]);const r=e.value[a.value].find(n=>n.id===t.id);r?r.amount>=10?u("商品數量超過限制"):(r.amount+=1,localStorage.setItem("currentUserCart",JSON.stringify(e.value)),u("成功加入購物車")):(e.value[a.value].push({...t,amount:1}),localStorage.setItem("currentUserCart",JSON.stringify(e.value)),u("成功加入購物車"))},minusAmount:t=>{t.amount>1&&(t.amount-=1,localStorage.setItem("currentUserCart",JSON.stringify(e.value)))},addAmount:t=>{t.amount<10&&(t.amount+=1,localStorage.setItem("currentUserCart",JSON.stringify(e.value)))},deleteItem:t=>{e.value[a.value]=e.value[a.value].filter(r=>r.id!==t.id),localStorage.setItem("currentUserCart",JSON.stringify(e.value))},handleCheckout:()=>{e.value[a.value]=[],localStorage.setItem("currentUserCart",JSON.stringify(e.value))}}};export{g as u};

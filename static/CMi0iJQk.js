import{_ as L,h as B,J as T,c as r,o as c,b as a,w as h,F as y,r as C,v as s,t as l,T as D,x as $,E,a as t,I as F,d as w,K as S,B as j,L as N}from"./CoYGitEY.js";import{a as V,u as z}from"./DRc2IO-D.js";import{_ as I}from"./C1haMGf8.js";import A from"./CZStXDh8.js";import{u as J}from"./DTE9tz-v.js";import{u as d}from"./3KGaiVR8.js";const K={class:"fixed top-5 left-1/2 -translate-x-1/2 z-50"},U={__name:"lightBox",setup(k){const{messages:_}=V(),p=B(!1);return T(()=>{p.value=_.value.length===1}),(x,u)=>(c(),r("div",K,[a(D,{name:"fade",tag:"div",class:"space-y-2"},{default:h(()=>[(c(!0),r(y,null,C(s(_),n=>(c(),r("div",{key:n.id,class:"bg-white px-6 py-3 rounded shadow-md text-center min-w-[240px]"},l(n.text),1))),128))]),_:1})]))}},G=L(U,[["__scopeId","data-v-06da7a4a"]]),M={key:0},P={class:"flex-1"},Y={class:"w-2/12 text-gray-600"},q={class:"flex w-3/12 items-center space-x-2"},H=["disabled","onClick"],O=["disabled","onClick"],Q=["onClick"],R={key:1,class:"text-gray-500"},W={class:"mt-4 pt-4"},X={class:"flex justify-between text-lg font-semibold"},Z={__name:"CartDrawer",setup(k){const{minusAmount:_,addAmount:p,deleteItem:x}=J(),u=d("showCart"),n=d("cartItems"),b=$(()=>n.value.reduce((i,e)=>i+e.amount*e.price,0).toFixed(2)),v=()=>{u.value=!1};return(i,e)=>{const m=A,f=I;return c(),r("div",null,[E(t("div",{class:"fixed inset-0 bg-black/50",onClick:v},null,512),[[F,s(u)]]),t("aside",{class:S(["fixed right-0 top-0 h-full w-115 bg-white shadow-lg p-4 transition-transform duration-300 overflow-y-scroll",s(u)?"translate-x-0":"translate-x-full"])},[e[2]||(e[2]=t("h2",{class:"text-lg font-bold mb-4"},"🛒購物車",-1)),s(n).length>0?(c(),r("ul",M,[(c(!0),r(y,null,C(s(n),o=>(c(),r("li",{key:o.id,class:"flex justify-between items-center space-x-3 p-3 border-b"},[t("span",P,l(o.title),1),t("span",Y,"$"+l(o.price),1),t("div",q,[t("button",{class:"flex items-center p-1 rounded bg-gray-200 hover:bg-gray-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",disabled:o.amount<=1,onClick:g=>s(_)(o)},[a(m,{name:"i-ic-round-minus",class:"text-xl"})],8,H),t("span",null,l(o.amount),1),t("button",{class:"flex items-center p-1 rounded bg-gray-200 hover:bg-gray-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",disabled:o.amount>=10,onClick:g=>s(p)(o)},[a(m,{name:"i-ic-round-add",class:"text-xl"})],8,O)]),t("button",{class:"flex w-1/12 item-center text-red-500 rounded-full hover:text-red-600 cursor-pointer",onClick:g=>s(x)(o)},[a(m,{name:"i-material-symbols-delete-rounded",class:"text-2xl"})],8,Q)]))),128))])):(c(),r("p",R,"購物車是空的")),t("div",W,[t("div",X,[e[1]||(e[1]=t("span",null,"總計",-1)),t("span",null,"$"+l(s(b)),1)]),a(f,{to:s(n).length>0?"/checkout":"/",onClick:e[0]||(e[0]=()=>u.value=!1),class:"block text-center mt-4 w-full bg-blue-600 text-white p-3 rounded hover:bg-blue-700 transition cursor-pointer"},{default:h(()=>[w(l(s(n).length>0?"前往結帳":"前往選購"),1)]),_:1},8,["to"])]),e[3]||(e[3]=t("div",{class:"mt-4 pt-4"},[t("p",null," ※ 同一商品數量不得大於10 ")],-1))],2)])}}},tt={class:"flex flex-col min-h-screen"},et={class:"bg-blue-600 text-white py-4 px-10 shadow-lg"},st={class:"container mx-auto flex justify-between items-center px-4"},ot={class:"flex space-x-6"},nt={class:"flex items-center space-x-5"},at={class:"absolute -top-2 -right-2 bg-red-500 text-xs text-white rounded-full px-2"},lt={class:"flex-1 container mx-auto p-6"},rt={class:"bg-gray-800 text-white text-center py-4"},mt={__name:"default",setup(k){const{logout:_}=z(),p=d("currentUserEmail"),x=d("isLoggedIn"),u=d("showCart",()=>!1);d("showLightBox",()=>!1);const n=d("cartItems",()=>[]);d("category",()=>"ALL");const b=$(()=>n.value.reduce((i,e)=>i+e.amount,0)),v=()=>{u.value=!0};return(i,e)=>{const m=G,f=I,o=A,g=Z;return c(),r(y,null,[a(m),t("div",tt,[t("header",et,[t("div",st,[t("nav",ot,[a(f,{to:"/",class:"hover:text-gray-200 font-semibold"},{default:h(()=>e[1]||(e[1]=[w("首頁")])),_:1}),a(f,{to:"/about",class:"hover:text-gray-200 font-semibold"},{default:h(()=>e[2]||(e[2]=[w("關於")])),_:1})]),t("div",nt,[t("span",null,l(s(p)),1),t("button",{onClick:e[0]||(e[0]=ct=>s(x)?s(_)():("navigateTo"in i?i.navigateTo:s(j))("/login")),class:"hover:text-gray-200 font-semibold cursor-pointer"},l(s(x)?"登出":"登入"),1),t("button",{class:"flex items-center relative cursor-pointer",onClick:v},[a(o,{class:"text-3xl text-white-500",name:"i-material-symbols-shopping-cart-rounded"}),t("span",at,l(s(b)),1)])])])]),t("main",lt,[N(i.$slots,"default")]),t("footer",rt,[t("p",null,"JAIKAI All rights reserved "+l(new Date().getFullYear()),1)])]),a(g)],64)}}};export{mt as default};

import{_ as U,h as E,J as T,c,o as i,b as _,w as h,F as C,r as $,v as t,t as u,T as D,x as L,E as N,a as e,I as F,d as w,K as S,L as V,M as A,B as j,N as z}from"./BYM5uEyf.js";import{a as J,u as d}from"./FhWWR_6m.js";import{_ as B}from"./u6hUzqUA.js";import I from"./Dah7AuKo.js";import{u as K}from"./mMrHCVxn.js";import{u as M}from"./B8mJ_JPF.js";const G={class:"fixed top-5 left-1/2 -translate-x-1/2 z-50"},P={__name:"lightBox",setup(k){const{messages:m}=J(),p=E(!1);return T(()=>{p.value=m.value.length===1}),(g,n)=>(i(),c("div",G,[_(D,{name:"fade",tag:"div",class:"space-y-2"},{default:h(()=>[(i(!0),c(C,null,$(t(m),s=>(i(),c("div",{key:s.id,class:"bg-white px-6 py-3 rounded shadow-md text-center min-w-[240px]"},u(s.text),1))),128))]),_:1})]))}},Y=U(P,[["__scopeId","data-v-06da7a4a"]]),q={key:0},H={class:"flex-1"},O={class:"w-2/12 text-gray-600"},Q={class:"flex w-3/12 items-center space-x-2"},R=["disabled","onClick"],W=["disabled","onClick"],X=["onClick"],Z={key:1,class:"text-gray-500"},tt={class:"mt-4 pt-4"},et={class:"flex justify-between text-lg font-semibold"},st={__name:"CartDrawer",setup(k){const{minusAmount:m,addAmount:p,deleteItem:g}=K(),n=d("showCart"),s=d("currentUserCart"),a=d("currentUserEmail"),v=L(()=>Array.isArray(s.value[a.value])?s.value[a.value].reduce((r,o)=>r+o.amount*o.price,0).toFixed(2):0),x=()=>{n.value=!1};return(r,o)=>{const f=I,b=B;return i(),c("div",null,[N(e("div",{class:"fixed inset-0 bg-black/50",onClick:x},null,512),[[F,t(n)]]),e("aside",{class:S(["fixed right-0 top-0 h-full w-115 bg-white shadow-lg p-4 transition-transform duration-300 overflow-y-scroll",t(n)?"translate-x-0":"translate-x-full"])},[o[2]||(o[2]=e("h2",{class:"text-lg font-bold mb-4"},"🛒購物車",-1)),Array.isArray(t(s)[t(a)])&&t(s)[t(a)].length>0?(i(),c("ul",q,[(i(!0),c(C,null,$(t(s)[t(a)],l=>(i(),c("li",{key:l.id,class:"flex justify-between items-center space-x-3 p-3 border-b"},[e("span",H,u(l.title),1),e("span",O,"$"+u(l.price),1),e("div",Q,[e("button",{class:"flex items-center p-1 rounded bg-gray-200 hover:bg-gray-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.amount<=1,onClick:y=>t(m)(l)},[_(f,{name:"i-ic-round-minus",class:"text-xl"})],8,R),e("span",null,u(l.amount),1),e("button",{class:"flex items-center p-1 rounded bg-gray-200 hover:bg-gray-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.amount>=10,onClick:y=>t(p)(l)},[_(f,{name:"i-ic-round-add",class:"text-xl"})],8,W)]),e("button",{class:"flex w-1/12 item-center text-red-500 rounded-full hover:text-red-600 cursor-pointer",onClick:y=>t(g)(l)},[_(f,{name:"i-material-symbols-delete-rounded",class:"text-2xl"})],8,X)]))),128))])):(i(),c("p",Z,"購物車是空的")),e("div",tt,[e("div",et,[o[1]||(o[1]=e("span",null,"總計",-1)),e("span",null,"$"+u(t(v)),1)]),_(b,{to:Array.isArray(t(s)[t(a)])&&t(s)[t(a)].length>0?"/checkout":"/",onClick:o[0]||(o[0]=()=>n.value=!1),class:"block text-center mt-4 w-full bg-blue-600 text-white p-3 rounded hover:bg-blue-700 transition cursor-pointer"},{default:h(()=>[w(u(Array.isArray(t(s)[t(a)])&&t(s)[t(a)].length>0?"前往結帳":"前往選購"),1)]),_:1},8,["to"])]),o[3]||(o[3]=e("div",{class:"mt-4 pt-4"},[e("p",null," ※ 同一商品數量不得大於10 ")],-1))],2)])}}},ot={class:"flex flex-col min-h-screen"},nt={class:"bg-blue-600 text-white py-4 px-10 shadow-lg"},at={class:"container mx-auto flex justify-between items-center px-4"},rt={class:"flex space-x-6"},lt={class:"flex items-center space-x-5"},it={class:"absolute -top-2 -right-2 bg-red-500 text-xs text-white rounded-full px-2"},ct={class:"flex-1 container mx-auto p-6"},ut={class:"bg-gray-800 text-white text-center py-4"},gt={__name:"default",setup(k){const{logout:m}=M(),p=d("currentUserEmail"),g=d("currentUserCart"),n=d("isLoggedIn"),s=d("showCart",()=>!1);d("showLightBox",()=>!1),d("category",()=>"ALL");const a=L(()=>n.value&&Array.isArray(g.value[p.value])?g.value[p.value].reduce((x,r)=>x+r.amount,0):0),v=()=>{s.value=!0};return(x,r)=>{const o=Y,f=B,b=I,l=st;return i(),c(C,null,[_(o),e("div",ot,[e("header",nt,[e("div",at,[e("nav",rt,[_(f,{to:"/",class:"hover:text-gray-200 font-semibold"},{default:h(()=>r[1]||(r[1]=[w("首頁")])),_:1}),_(f,{to:"/about",class:"hover:text-gray-200 font-semibold"},{default:h(()=>r[2]||(r[2]=[w("關於")])),_:1})]),e("div",lt,[e("span",null,u(t(p)),1),e("button",{onClick:r[0]||(r[0]=y=>t(n)?t(m)():("navigateTo"in x?x.navigateTo:t(j))("/login")),class:"hover:text-gray-200 font-semibold cursor-pointer"},u(t(n)?"登出":"登入"),1),t(n)?(i(),c("button",{key:0,class:"flex items-center relative cursor-pointer",onClick:v},[_(b,{class:"text-3xl text-white-500",name:"i-material-symbols-shopping-cart-rounded"}),e("span",it,u(t(a)),1)])):A("",!0)])])]),e("main",ct,[z(x.$slots,"default")]),e("footer",ut,[e("p",null,"JAIKAI All rights reserved "+u(new Date().getFullYear()),1)])]),t(n)?(i(),V(l,{key:0})):A("",!0)],64)}}};export{gt as default};

import{_ as U,h as E,K as T,c as i,o as c,b as p,w as h,F as C,r as $,n as t,t as u,T as D,x as L,E as N,a as e,J as F,d as w,I as S,L as V,M as A,B as j,N as z}from"./CmMUVE8C.js";import{a as J,u as _}from"./iv6QuJzc.js";import{_ as B}from"./DFmA13Kr.js";import I from"./ByTHZTMA.js";import{u as K}from"./_WGo_Wsm.js";import{u as M}from"./uleYHyfX.js";const G={class:"fixed top-5 left-1/2 -translate-x-1/2 z-50"},P={__name:"lightBox",setup(k){const{messages:m}=J(),f=E(!1);return T(()=>{f.value=m.value.length===1}),(g,a)=>(c(),i("div",G,[p(D,{name:"fade",tag:"div",class:"space-y-2"},{default:h(()=>[(c(!0),i(C,null,$(t(m),o=>(c(),i("div",{key:o.id,class:"bg-white px-6 py-3 rounded shadow-md text-center min-w-[240px]"},u(o.text),1))),128))]),_:1})]))}},Y=U(P,[["__scopeId","data-v-06da7a4a"]]),q={key:0},H={class:"flex-1"},O={class:"w-2/12 text-gray-600"},Q={class:"flex w-3/12 items-center space-x-2"},R=["disabled","onClick"],W=["disabled","onClick"],X=["onClick"],Z={key:1,class:"text-gray-500"},tt={class:"mt-4 pt-4"},et={class:"flex justify-between text-lg font-semibold"},st={__name:"CartDrawer",setup(k){const{minusAmount:m,addAmount:f,deleteItem:g}=K(),a=_("showCart"),o=_("currentUserCart"),r=_("currentUserEmail"),v=L(()=>Array.isArray(o.value[r.value])?o.value[r.value].reduce((n,s)=>n+s.amount*s.price,0).toFixed(2):0),d=()=>{a.value=!1};return(n,s)=>{const x=I,b=B;return c(),i("div",null,[N(e("div",{class:"fixed inset-0 bg-black/50",onClick:d},null,512),[[F,t(a)]]),e("aside",{class:S(["fixed right-0 top-0 h-full w-115 bg-white shadow-lg p-4 transition-transform duration-300 overflow-y-scroll",t(a)?"translate-x-0":"translate-x-full"])},[s[2]||(s[2]=e("h2",{class:"text-lg font-bold mb-4"},"🛒購物車",-1)),Array.isArray(t(o)[t(r)])&&t(o)[t(r)].length>0?(c(),i("ul",q,[(c(!0),i(C,null,$(t(o)[t(r)],l=>(c(),i("li",{key:l.id,class:"flex justify-between items-center space-x-3 p-3 border-b"},[e("span",H,u(l.title),1),e("span",O,"$"+u(l.price),1),e("div",Q,[e("button",{class:"flex items-center p-1 rounded bg-gray-200 hover:bg-gray-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.amount<=1,onClick:y=>t(m)(l)},[p(x,{name:"i-ic-round-minus",class:"text-xl"})],8,R),e("span",null,u(l.amount),1),e("button",{class:"flex items-center p-1 rounded bg-gray-200 hover:bg-gray-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",disabled:l.amount>=10,onClick:y=>t(f)(l)},[p(x,{name:"i-ic-round-add",class:"text-xl"})],8,W)]),e("button",{class:"flex w-1/12 item-center text-red-500 rounded-full hover:text-red-600 cursor-pointer",onClick:y=>t(g)(l)},[p(x,{name:"i-material-symbols-delete-rounded",class:"text-2xl"})],8,X)]))),128))])):(c(),i("p",Z,"購物車是空的")),e("div",tt,[e("div",et,[s[1]||(s[1]=e("span",null,"總計",-1)),e("span",null,"$"+u(t(v)),1)]),p(b,{to:Array.isArray(t(o)[t(r)])&&t(o)[t(r)].length>0?"/checkout":"/",onClick:s[0]||(s[0]=()=>a.value=!1),class:"block text-center mt-4 w-full bg-blue-600 text-white p-3 rounded hover:bg-blue-700 transition cursor-pointer"},{default:h(()=>[w(u(Array.isArray(t(o)[t(r)])&&t(o)[t(r)].length>0?"前往結帳":"前往選購"),1)]),_:1},8,["to"])]),s[3]||(s[3]=e("div",{class:"mt-4 pt-4"},[e("p",null," ※ 同一商品數量不得大於10 ")],-1))],2)])}}},ot={class:"flex flex-col min-h-screen"},nt={class:"bg-blue-600 text-white py-4 px-10 shadow-lg"},at={class:"container mx-auto flex justify-between items-center px-4"},rt={class:"flex space-x-6"},lt={class:"flex items-center space-x-5"},ct={class:"absolute -top-2 -right-2 bg-red-500 text-xs text-white rounded-full px-2"},it={class:"flex-1 container mx-auto p-6"},ut={class:"bg-gray-800 text-white text-center py-4"},gt={__name:"default",setup(k){const{logout:m}=M(),f=_("currentUserEmail"),g=_("currentUserCart"),a=_("isLoggedIn"),o=_("showCart",()=>!1);_("showLightBox",()=>!1),_("category",()=>"ALL");const r=L(()=>{const d=f.value;if(!a.value||!d||!g.value||!g.value[d])return 0;const n=g.value[d];return Array.isArray(n)?n.reduce((s,x)=>s+x.amount,0):0}),v=()=>{o.value=!0};return(d,n)=>{const s=Y,x=B,b=I,l=st;return c(),i(C,null,[p(s),e("div",ot,[e("header",nt,[e("div",at,[e("nav",rt,[p(x,{to:"/",class:"hover:text-gray-200 font-semibold"},{default:h(()=>n[1]||(n[1]=[w("首頁")])),_:1}),p(x,{to:"/about",class:"hover:text-gray-200 font-semibold"},{default:h(()=>n[2]||(n[2]=[w("關於")])),_:1})]),e("div",lt,[e("span",null,u(t(f)),1),e("button",{onClick:n[0]||(n[0]=y=>t(a)?t(m)():("navigateTo"in d?d.navigateTo:t(j))("/login")),class:"hover:text-gray-200 font-semibold cursor-pointer"},u(t(a)?"登出":"登入"),1),t(a)?(c(),i("button",{key:0,class:"flex items-center relative cursor-pointer",onClick:v},[p(b,{class:"text-3xl text-white-500",name:"i-material-symbols-shopping-cart-rounded"}),e("span",ct,u(t(r)),1)])):A("",!0)])])]),e("main",it,[z(d.$slots,"default")]),e("footer",ut,[e("p",null,"JAIKAI All rights reserved "+u(new Date().getFullYear()),1)])]),t(a)?(c(),V(l,{key:0})):A("",!0)],64)}}};export{gt as default};
